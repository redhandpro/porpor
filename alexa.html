<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Web Alexa - Advanced</title>
<style>
  body {
    font-family: "Segoe UI", Arial, sans-serif;
    background: radial-gradient(circle at top, #111827, #000);
    color: #fff;
    text-align: center;
    padding-top: 80px;
  }
  h1 {
    font-size: 2.2rem;
    margin-bottom: 1rem;
  }
  button {
    background: #3b82f6;
    border: none;
    color: white;
    padding: 15px 40px;
    border-radius: 10px;
    font-size: 18px;
    cursor: pointer;
    transition: 0.3s;
  }
  button:hover {
    background: #2563eb;
  }
  #output {
    margin-top: 20px;
    font-size: 1.3rem;
  }
  footer {
    margin-top: 50px;
    color: #94a3b8;
    font-size: 0.9rem;
  }
</style>
</head>
<body>
  <h1>üé§ Web Alexa Assistant</h1>
  <p id="output">Click the button and say something like:<br>
  <em>"what time is it", "play despacito", "who is Elon Musk", "tell me a joke"</em></p>
  <button onclick="startListening()">üéôÔ∏è Speak</button>

  <footer>Made with ‚ù§Ô∏è by You</footer>

<script>
const recognition = new(window.SpeechRecognition || window.webkitSpeechRecognition)();
recognition.lang = 'en-US';
recognition.interimResults = false;
recognition.maxAlternatives = 1;

const synth = window.speechSynthesis;

function speak(text) {
  const utter = new SpeechSynthesisUtterance(text);
  utter.lang = 'en-US';
  utter.pitch = 1;
  utter.rate = 1;
  synth.speak(utter);
  document.getElementById("output").textContent = "Alexa: " + text;
}

function startListening() {
  speak("Listening...");
  recognition.start();
}

recognition.onresult = async (event) => {
  const command = event.results[0][0].transcript.toLowerCase();
  console.log("User said:", command);
  handleCommand(command);
};

async function handleCommand(command) {
  if (command.includes("time")) {
    const time = new Date().toLocaleTimeString();
    speak("The time is " + time);
  }

  else if (command.includes("play")) {
    const song = command.replace("play", "").trim();
    speak("Playing " + song + " on YouTube");
    window.open(`https://www.youtube.com/results?search_query=${encodeURIComponent(song)}`, "_blank");
  }

  else if (command.includes("who is") || command.includes("what is")) {
    const topic = command.replace("who is", "").replace("what is", "").trim();
    speak("Searching for " + topic + " on Wikipedia...");
    try {
      const response = await fetch(`https://en.wikipedia.org/api/rest_v1/page/summary/${encodeURIComponent(topic)}`);
      const data = await response.json();
      if (data.extract) {
        speak(data.extract);
      } else {
        speak("Sorry, I couldn't find information about " + topic);
      }
    } catch (err) {
      speak("There was an error connecting to Wikipedia.");
    }
  }

  else if (command.includes("joke")) {
    const jokes = [
      "Why do programmers prefer dark mode? Because light attracts bugs!",
      "Why did the computer get cold? It forgot to close its Windows.",
      "How many programmers does it take to change a light bulb? None, that's a hardware problem!"
    ];
    const joke = jokes[Math.floor(Math.random() * jokes.length)];
    speak(joke);
  }

  else if (command.includes("hello")) {
    speak("Hello there! How are you today?");
  }

  else if (command.includes("goodbye") || command.includes("stop")) {
    speak("Goodbye! Have a great day!");
  }

  else {
    speak("Sorry, I didn't understand that command.");
  }
}

recognition.onerror = (event) => {
  console.error(event.error);
  speak("Sorry, something went wrong while listening.");
};
</script>
</body>
</html>

